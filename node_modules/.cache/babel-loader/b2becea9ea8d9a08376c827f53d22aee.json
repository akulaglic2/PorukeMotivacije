{"ast":null,"code":"import { Component, createElement, createContext } from 'react';\nvar Context = createContext({\n  state: {}\n});\nvar Consumer = Context.Consumer;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar keys = Object.keys;\n\nfunction mapSetStateToActions(setState, actionMap) {\n  return keys(actionMap).reduce(function (map, type) {\n    var _Object$assign;\n\n    return Object.assign(map, (_Object$assign = {}, _Object$assign[type] = function () {\n      return setState(actionMap[type].apply(actionMap, arguments), undefined, type);\n    }, _Object$assign));\n  }, {});\n}\n\nfunction mapStateToSelectors(state, selectorMap) {\n  return keys(selectorMap).reduce(function (map, type) {\n    var _Object$assign2;\n\n    return Object.assign(map, (_Object$assign2 = {}, _Object$assign2[type] = function () {\n      return selectorMap[type].apply(selectorMap, arguments)(state);\n    }, _Object$assign2));\n  }, {});\n}\n\nfunction mapPropsToEffects(getEffectProps, effectMap) {\n  return keys(effectMap).reduce(function (final, type) {\n    var _Object$assign3;\n\n    return Object.assign(final, (_Object$assign3 = {}, _Object$assign3[type] = function () {\n      return effectMap[type].apply(effectMap, arguments)(getEffectProps(type));\n    }, _Object$assign3));\n  }, {});\n}\n\nfunction parseUpdater(updaterOrState, state) {\n  return typeof updaterOrState === \"function\" ? updaterOrState(state) : updaterOrState;\n}\n\nvar InnerContainer = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(InnerContainer, _React$Component);\n\n  function InnerContainer(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", _this.props.initialState);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"ignoreState\", false);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"unmount\", undefined);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getEffectProps\", function (type) {\n      var _this$props = _this.props,\n          context = _this$props.context,\n          state = _this$props.state;\n      return {\n        state: context && state ? state : _this.state,\n        setState: function setState(u, c) {\n          return _this.handleSetState(u, c, type);\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleSetState\", function (updater, callback, type) {\n      var _this$props2 = _this.props,\n          context = _this$props2.context,\n          setContextState = _this$props2.setContextState;\n      var prevState;\n\n      var updaterFn = function updaterFn(state) {\n        prevState = state;\n        return parseUpdater(updater, state);\n      };\n\n      var callbackFn = function callbackFn() {\n        var _this$props3 = _this.props,\n            _this$props3$state = _this$props3.state,\n            state = _this$props3$state === void 0 ? _this.state : _this$props3$state,\n            onUpdate = _this$props3.onUpdate;\n\n        if (onUpdate && _this.ignoreState !== state) {\n          onUpdate(_objectSpread({}, _this.getEffectProps(\"onUpdate\"), {\n            prevState: prevState,\n            type: type\n          }));\n        }\n\n        if (callback) callback();\n      };\n\n      if (context && setContextState) {\n        setContextState(context, updaterFn, callbackFn, type);\n      } else {\n        // @ts-ignore\n        _this.setState(updaterFn, callbackFn);\n      }\n    });\n\n    var _context = props.context,\n        _setContextState = props.setContextState,\n        _state = props.state,\n        initialState = props.initialState;\n\n    if (_context && _setContextState && !_state) {\n      _setContextState(_context, function (currentState) {\n        return Object.assign({}, initialState, currentState);\n      }, undefined, \"initialState\");\n    }\n\n    return _this;\n  }\n\n  var _proto = InnerContainer.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    var _this$props4 = this.props,\n        context = _this$props4.context,\n        mountContainer = _this$props4.mountContainer,\n        onMount = _this$props4.onMount;\n\n    var mount = function mount() {\n      return onMount && onMount(_this2.getEffectProps(\"onMount\"));\n    };\n\n    if (context && mountContainer) {\n      this.unmount = mountContainer(context, mount);\n    } else if (!context) {\n      mount();\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    var _this$props5 = this.props,\n        pure = _this$props5.pure,\n        context = _this$props5.context,\n        stateFromProps = _this$props5.state;\n    var nextStateFromProps = nextProps.state,\n        shouldUpdate = nextProps.shouldUpdate;\n    var couldUpdate = true;\n\n    if (context && stateFromProps && nextStateFromProps) {\n      couldUpdate = !pure || stateFromProps !== nextStateFromProps;\n\n      if (couldUpdate && shouldUpdate) {\n        couldUpdate = shouldUpdate({\n          state: stateFromProps,\n          nextState: nextStateFromProps\n        });\n        this.ignoreState = !couldUpdate && nextStateFromProps;\n      }\n    } else if (!context) {\n      couldUpdate = !pure || this.state !== nextState;\n\n      if (couldUpdate && shouldUpdate) {\n        couldUpdate = shouldUpdate({\n          state: this.state,\n          nextState: nextState\n        });\n        this.ignoreState = !couldUpdate && nextState;\n      }\n    }\n\n    return couldUpdate;\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this3 = this;\n\n    var _this$props6 = this.props,\n        context = _this$props6.context,\n        onUnmount = _this$props6.onUnmount;\n\n    var unmount = function unmount() {\n      return onUnmount && onUnmount(_this3.getEffectProps(\"onUnmount\"));\n    };\n\n    if (this.unmount) {\n      this.unmount(unmount);\n    } else if (!context) {\n      unmount();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props7 = this.props,\n        state = _this$props7.state,\n        children = _this$props7.children,\n        actions = _this$props7.actions,\n        selectors = _this$props7.selectors,\n        effects = _this$props7.effects;\n    var childrenProps = Object.assign({}, state || this.state, actions && mapSetStateToActions(this.handleSetState, actions), selectors && mapStateToSelectors(state || this.state, selectors), effects && mapPropsToEffects(this.getEffectProps, effects));\n    return children(childrenProps);\n  };\n\n  return InnerContainer;\n}(Component); // eslint-disable-next-line react/prefer-stateless-function, react/no-multi-comp\n\n\n_defineProperty(InnerContainer, \"defaultProps\", {\n  initialState: {}\n});\n\nvar Container = /*#__PURE__*/function (_React$Component2) {\n  _inheritsLoose(Container, _React$Component2);\n\n  function Container() {\n    return _React$Component2.apply(this, arguments) || this;\n  }\n\n  var _proto2 = Container.prototype;\n\n  _proto2.render = function render() {\n    var _this4 = this;\n\n    var context = this.props.context;\n\n    if (typeof context !== \"undefined\") {\n      return createElement(Consumer, null, function (_ref) {\n        var state = _ref.state,\n            setContextState = _ref.setContextState,\n            mountContainer = _ref.mountContainer;\n        return createElement(InnerContainer, _extends({}, _this4.props, {\n          state: state[context],\n          setContextState: setContextState,\n          mountContainer: mountContainer\n        }));\n      });\n    }\n\n    return createElement(InnerContainer, this.props);\n  };\n\n  return Container;\n}(Component);\n\nvar reduxDevtoolsExtension = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION__;\n\nvar Provider = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Provider, _React$Component);\n\n  function Provider(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"containers\", {});\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"devtools\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"mountContainer\", function (context, onMount) {\n      if (!_this.containers[context]) {\n        _this.containers[context] = 0;\n        if (onMount) _this.setState(null, onMount);\n      }\n\n      _this.containers[context] += 1;\n      return function (onUnmount) {\n        if (_this.containers[context] === 1 && onUnmount) onUnmount();\n        _this.containers[context] -= 1;\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"setContextState\", function (context, updater, callback, type) {\n      var prevState;\n\n      var updaterFn = function updaterFn(state) {\n        var _Object$assign;\n\n        prevState = state.state;\n        return {\n          state: Object.assign({}, state.state, (_Object$assign = {}, _Object$assign[context] = Object.assign({}, state.state[context], parseUpdater(updater, state.state[context] || {})), _Object$assign))\n        };\n      };\n\n      var callbackFn = function callbackFn() {\n        if (_this.props.onUpdate) {\n          var onUpdateProps = _objectSpread({}, _this.getProps(\"Provider/onUpdate\"), {\n            prevState: prevState,\n            context: context,\n            type: type\n          });\n\n          _this.props.onUpdate(onUpdateProps);\n        }\n\n        if (callback) callback(); // istanbul ignore next\n\n        if (_this.devtools && type) {\n          var devtoolsType = context ? context + \"/\" + type : type;\n\n          _this.devtools.send(devtoolsType, _this.state.state);\n        }\n      }; // @ts-ignore\n\n\n      _this.setState(updaterFn, callbackFn);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getProps\", function (type) {\n      var _this$state = _this.state,\n          state = _this$state.state,\n          setContextState = _this$state.setContextState;\n      return {\n        state: state,\n        setContextState: function (_setContextState) {\n          function setContextState(_x, _x2, _x3) {\n            return _setContextState.apply(this, arguments);\n          }\n\n          setContextState.toString = function () {\n            return _setContextState.toString();\n          };\n\n          return setContextState;\n        }(function (context, updater, callback) {\n          return setContextState(context, updater, callback, type);\n        })\n      };\n    });\n\n    var devtools = props.devtools,\n        initialState = props.initialState;\n    _this.state = {\n      state: initialState,\n      mountContainer: _this.mountContainer,\n      setContextState: _this.setContextState\n    }; // istanbul ignore next\n\n    if (devtools && reduxDevtoolsExtension) {\n      _this.devtools = reduxDevtoolsExtension.connect({\n        name: \"Context\"\n      });\n\n      _this.devtools.init(initialState);\n\n      _this.devtools.subscribe(function (message) {\n        if (message.type === \"DISPATCH\" && message.state) {\n          _this.setState(function (state) {\n            return {\n              state: Object.assign({}, state.state, JSON.parse(message.state))\n            };\n          });\n        }\n      });\n    }\n\n    return _this;\n  }\n\n  var _proto = Provider.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.props.onMount) {\n      this.props.onMount(this.getProps(\"Provider/onMount\"));\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.props.onUnmount) {\n      var _this$getProps = this.getProps(),\n          _setContextState2 = _this$getProps.setContextState,\n          args = _objectWithoutPropertiesLoose(_this$getProps, [\"setContextState\"]);\n\n      this.props.onUnmount(args);\n    } // istanbul ignore next\n\n\n    if (this.devtools && reduxDevtoolsExtension) {\n      this.devtools.unsubscribe();\n      reduxDevtoolsExtension.disconnect();\n    }\n  };\n\n  _proto.render = function render() {\n    return (// @ts-ignore\n      createElement(Context.Provider, {\n        value: this.state\n      }, this.props.children)\n    );\n  };\n\n  return Provider;\n}(Component);\n\n_defineProperty(Provider, \"defaultProps\", {\n  initialState: {}\n});\n\nexport { Consumer, Container, Provider };","map":{"version":3,"sources":["/Users/azraibric/Documents/PorukeMotivacije/node_modules/constate/dist/constate.es.js"],"names":["Component","createElement","createContext","Context","state","Consumer","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_extends","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","_objectSpread","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_assertThisInitialized","self","ReferenceError","mapSetStateToActions","setState","actionMap","reduce","map","type","_Object$assign","undefined","mapStateToSelectors","selectorMap","_Object$assign2","mapPropsToEffects","getEffectProps","effectMap","final","_Object$assign3","parseUpdater","updaterOrState","InnerContainer","_React$Component","props","_this","initialState","_this$props","context","u","c","handleSetState","updater","callback","_this$props2","setContextState","prevState","updaterFn","callbackFn","_this$props3","_this$props3$state","onUpdate","ignoreState","_context","_setContextState","_state","currentState","_proto","componentDidMount","_this2","_this$props4","mountContainer","onMount","mount","unmount","shouldComponentUpdate","nextProps","nextState","_this$props5","pure","stateFromProps","nextStateFromProps","shouldUpdate","couldUpdate","componentWillUnmount","_this3","_this$props6","onUnmount","render","_this$props7","children","actions","selectors","effects","childrenProps","Container","_React$Component2","_proto2","_this4","_ref","reduxDevtoolsExtension","window","__REDUX_DEVTOOLS_EXTENSION__","Provider","containers","onUpdateProps","getProps","devtools","devtoolsType","send","_this$state","_x","_x2","_x3","toString","connect","name","init","subscribe","message","JSON","parse","_this$getProps","_setContextState2","args","unsubscribe","disconnect"],"mappings":"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","sourcesContent":["import { Component, createElement, createContext } from 'react';\n\nvar Context = createContext({\n  state: {}\n});\n\nvar Consumer = Context.Consumer;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar keys = Object.keys;\nfunction mapSetStateToActions(setState, actionMap) {\n  return keys(actionMap).reduce(function (map, type) {\n    var _Object$assign;\n\n    return Object.assign(map, (_Object$assign = {}, _Object$assign[type] = function () {\n      return setState(actionMap[type].apply(actionMap, arguments), undefined, type);\n    }, _Object$assign));\n  }, {});\n}\nfunction mapStateToSelectors(state, selectorMap) {\n  return keys(selectorMap).reduce(function (map, type) {\n    var _Object$assign2;\n\n    return Object.assign(map, (_Object$assign2 = {}, _Object$assign2[type] = function () {\n      return selectorMap[type].apply(selectorMap, arguments)(state);\n    }, _Object$assign2));\n  }, {});\n}\nfunction mapPropsToEffects(getEffectProps, effectMap) {\n  return keys(effectMap).reduce(function (final, type) {\n    var _Object$assign3;\n\n    return Object.assign(final, (_Object$assign3 = {}, _Object$assign3[type] = function () {\n      return effectMap[type].apply(effectMap, arguments)(getEffectProps(type));\n    }, _Object$assign3));\n  }, {});\n}\nfunction parseUpdater(updaterOrState, state) {\n  return typeof updaterOrState === \"function\" ? updaterOrState(state) : updaterOrState;\n}\n\nvar InnerContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(InnerContainer, _React$Component);\n\n  function InnerContainer(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", _this.props.initialState);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"ignoreState\", false);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"unmount\", undefined);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getEffectProps\", function (type) {\n      var _this$props = _this.props,\n          context = _this$props.context,\n          state = _this$props.state;\n      return {\n        state: context && state ? state : _this.state,\n        setState: function setState(u, c) {\n          return _this.handleSetState(u, c, type);\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleSetState\", function (updater, callback, type) {\n      var _this$props2 = _this.props,\n          context = _this$props2.context,\n          setContextState = _this$props2.setContextState;\n      var prevState;\n\n      var updaterFn = function updaterFn(state) {\n        prevState = state;\n        return parseUpdater(updater, state);\n      };\n\n      var callbackFn = function callbackFn() {\n        var _this$props3 = _this.props,\n            _this$props3$state = _this$props3.state,\n            state = _this$props3$state === void 0 ? _this.state : _this$props3$state,\n            onUpdate = _this$props3.onUpdate;\n\n        if (onUpdate && _this.ignoreState !== state) {\n          onUpdate(_objectSpread({}, _this.getEffectProps(\"onUpdate\"), {\n            prevState: prevState,\n            type: type\n          }));\n        }\n\n        if (callback) callback();\n      };\n\n      if (context && setContextState) {\n        setContextState(context, updaterFn, callbackFn, type);\n      } else {\n        // @ts-ignore\n        _this.setState(updaterFn, callbackFn);\n      }\n    });\n\n    var _context = props.context,\n        _setContextState = props.setContextState,\n        _state = props.state,\n        initialState = props.initialState;\n\n    if (_context && _setContextState && !_state) {\n      _setContextState(_context, function (currentState) {\n        return Object.assign({}, initialState, currentState);\n      }, undefined, \"initialState\");\n    }\n\n    return _this;\n  }\n\n  var _proto = InnerContainer.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    var _this$props4 = this.props,\n        context = _this$props4.context,\n        mountContainer = _this$props4.mountContainer,\n        onMount = _this$props4.onMount;\n\n    var mount = function mount() {\n      return onMount && onMount(_this2.getEffectProps(\"onMount\"));\n    };\n\n    if (context && mountContainer) {\n      this.unmount = mountContainer(context, mount);\n    } else if (!context) {\n      mount();\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    var _this$props5 = this.props,\n        pure = _this$props5.pure,\n        context = _this$props5.context,\n        stateFromProps = _this$props5.state;\n    var nextStateFromProps = nextProps.state,\n        shouldUpdate = nextProps.shouldUpdate;\n    var couldUpdate = true;\n\n    if (context && stateFromProps && nextStateFromProps) {\n      couldUpdate = !pure || stateFromProps !== nextStateFromProps;\n\n      if (couldUpdate && shouldUpdate) {\n        couldUpdate = shouldUpdate({\n          state: stateFromProps,\n          nextState: nextStateFromProps\n        });\n        this.ignoreState = !couldUpdate && nextStateFromProps;\n      }\n    } else if (!context) {\n      couldUpdate = !pure || this.state !== nextState;\n\n      if (couldUpdate && shouldUpdate) {\n        couldUpdate = shouldUpdate({\n          state: this.state,\n          nextState: nextState\n        });\n        this.ignoreState = !couldUpdate && nextState;\n      }\n    }\n\n    return couldUpdate;\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this3 = this;\n\n    var _this$props6 = this.props,\n        context = _this$props6.context,\n        onUnmount = _this$props6.onUnmount;\n\n    var unmount = function unmount() {\n      return onUnmount && onUnmount(_this3.getEffectProps(\"onUnmount\"));\n    };\n\n    if (this.unmount) {\n      this.unmount(unmount);\n    } else if (!context) {\n      unmount();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props7 = this.props,\n        state = _this$props7.state,\n        children = _this$props7.children,\n        actions = _this$props7.actions,\n        selectors = _this$props7.selectors,\n        effects = _this$props7.effects;\n    var childrenProps = Object.assign({}, state || this.state, actions && mapSetStateToActions(this.handleSetState, actions), selectors && mapStateToSelectors(state || this.state, selectors), effects && mapPropsToEffects(this.getEffectProps, effects));\n    return children(childrenProps);\n  };\n\n  return InnerContainer;\n}(Component); // eslint-disable-next-line react/prefer-stateless-function, react/no-multi-comp\n\n\n_defineProperty(InnerContainer, \"defaultProps\", {\n  initialState: {}\n});\n\nvar Container =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inheritsLoose(Container, _React$Component2);\n\n  function Container() {\n    return _React$Component2.apply(this, arguments) || this;\n  }\n\n  var _proto2 = Container.prototype;\n\n  _proto2.render = function render() {\n    var _this4 = this;\n\n    var context = this.props.context;\n\n    if (typeof context !== \"undefined\") {\n      return createElement(Consumer, null, function (_ref) {\n        var state = _ref.state,\n            setContextState = _ref.setContextState,\n            mountContainer = _ref.mountContainer;\n        return createElement(InnerContainer, _extends({}, _this4.props, {\n          state: state[context],\n          setContextState: setContextState,\n          mountContainer: mountContainer\n        }));\n      });\n    }\n\n    return createElement(InnerContainer, this.props);\n  };\n\n  return Container;\n}(Component);\n\nvar reduxDevtoolsExtension = typeof window !== \"undefined\" && window.__REDUX_DEVTOOLS_EXTENSION__;\n\nvar Provider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Provider, _React$Component);\n\n  function Provider(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"containers\", {});\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"devtools\", void 0);\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"mountContainer\", function (context, onMount) {\n      if (!_this.containers[context]) {\n        _this.containers[context] = 0;\n        if (onMount) _this.setState(null, onMount);\n      }\n\n      _this.containers[context] += 1;\n      return function (onUnmount) {\n        if (_this.containers[context] === 1 && onUnmount) onUnmount();\n        _this.containers[context] -= 1;\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"setContextState\", function (context, updater, callback, type) {\n      var prevState;\n\n      var updaterFn = function updaterFn(state) {\n        var _Object$assign;\n\n        prevState = state.state;\n        return {\n          state: Object.assign({}, state.state, (_Object$assign = {}, _Object$assign[context] = Object.assign({}, state.state[context], parseUpdater(updater, state.state[context] || {})), _Object$assign))\n        };\n      };\n\n      var callbackFn = function callbackFn() {\n        if (_this.props.onUpdate) {\n          var onUpdateProps = _objectSpread({}, _this.getProps(\"Provider/onUpdate\"), {\n            prevState: prevState,\n            context: context,\n            type: type\n          });\n\n          _this.props.onUpdate(onUpdateProps);\n        }\n\n        if (callback) callback(); // istanbul ignore next\n\n        if (_this.devtools && type) {\n          var devtoolsType = context ? context + \"/\" + type : type;\n\n          _this.devtools.send(devtoolsType, _this.state.state);\n        }\n      }; // @ts-ignore\n\n\n      _this.setState(updaterFn, callbackFn);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"getProps\", function (type) {\n      var _this$state = _this.state,\n          state = _this$state.state,\n          setContextState = _this$state.setContextState;\n      return {\n        state: state,\n        setContextState: function (_setContextState) {\n          function setContextState(_x, _x2, _x3) {\n            return _setContextState.apply(this, arguments);\n          }\n\n          setContextState.toString = function () {\n            return _setContextState.toString();\n          };\n\n          return setContextState;\n        }(function (context, updater, callback) {\n          return setContextState(context, updater, callback, type);\n        })\n      };\n    });\n\n    var devtools = props.devtools,\n        initialState = props.initialState;\n    _this.state = {\n      state: initialState,\n      mountContainer: _this.mountContainer,\n      setContextState: _this.setContextState\n    }; // istanbul ignore next\n\n    if (devtools && reduxDevtoolsExtension) {\n      _this.devtools = reduxDevtoolsExtension.connect({\n        name: \"Context\"\n      });\n\n      _this.devtools.init(initialState);\n\n      _this.devtools.subscribe(function (message) {\n        if (message.type === \"DISPATCH\" && message.state) {\n          _this.setState(function (state) {\n            return {\n              state: Object.assign({}, state.state, JSON.parse(message.state))\n            };\n          });\n        }\n      });\n    }\n\n    return _this;\n  }\n\n  var _proto = Provider.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    if (this.props.onMount) {\n      this.props.onMount(this.getProps(\"Provider/onMount\"));\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    if (this.props.onUnmount) {\n      var _this$getProps = this.getProps(),\n          _setContextState2 = _this$getProps.setContextState,\n          args = _objectWithoutPropertiesLoose(_this$getProps, [\"setContextState\"]);\n\n      this.props.onUnmount(args);\n    } // istanbul ignore next\n\n\n    if (this.devtools && reduxDevtoolsExtension) {\n      this.devtools.unsubscribe();\n      reduxDevtoolsExtension.disconnect();\n    }\n  };\n\n  _proto.render = function render() {\n    return (// @ts-ignore\n      createElement(Context.Provider, {\n        value: this.state\n      }, this.props.children)\n    );\n  };\n\n  return Provider;\n}(Component);\n\n_defineProperty(Provider, \"defaultProps\", {\n  initialState: {}\n});\n\nexport { Consumer, Container, Provider };\n"]},"metadata":{},"sourceType":"module"}